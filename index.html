<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Time Manager</title>
    <style>
        body {
            font-family: 'Courier New', Courier, monospace;
            background-color: #1a1a1a;
            color: #ffffff;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
        }
        .container {
            background-color: #2a2a2a;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
        }
        .row {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        .time-display {
            font-size: 1.5rem;
            font-weight: bold;
            width: 100px;
            margin-right: 20px;
            color: #00ffcc;
        }
        .button-group {
            display: flex;
            gap: 10px;
        }
        button {
            padding: 5px;
            cursor: pointer;
            background-color: #444;
            color: white;
            border: 2px solid #666;
            border-radius: 8px;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        button img {
            width: 40px;  
            height: 40px;
            object-fit: contain;
        }
        button:hover {
            background-color: #00ffcc;
            border-color: #00ffcc;
        }
        button:active {
            transform: scale(0.95);
        }
    </style>
</head>
<body>

<div class="container" id="time-container"></div>

<script>
    // 1, 2, 4, 5번째 줄용 버튼 데이터
    const standardButtons = [
        { name: 'flash', sec: 300 },
        { name: '273', sec: 273 },
        { name: '254', sec: 254 },
        { name: '234', sec: 234 }
    ];

    // 3번째 줄 전용 버튼 데이터
    const specialButtons = [
        { name: 'flash', sec: 300 },
        { name: '273', sec: 273 },
        { name: '250', sec: 250 },
        { name: '234', sec: 234 },
        { name: '217', sec: 217 }
    ];
    
    const rowsCount = 5;
    let timeStates = [0, 0, 0, 0, 0];
    let intervals = [null, null, null, null, null];

    const container = document.getElementById('time-container');

    function formatTime(totalSeconds) {
        const mins = Math.floor(totalSeconds / 60);
        const secs = totalSeconds % 60;
        return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
    }

    function updateDisplay(rowIndex) {
        const timeElement = document.getElementById(`time-${rowIndex}`);
        if (timeElement) {
            timeElement.innerText = formatTime(timeStates[rowIndex]);
        }
    }

    function setAndStartTimer(rowIndex, seconds) {
        timeStates[rowIndex] = seconds;
        updateDisplay(rowIndex);

        if (intervals[rowIndex]) return;

        intervals[rowIndex] = setInterval(() => {
            if (timeStates[rowIndex] > 0) {
                timeStates[rowIndex]--;
                updateDisplay(rowIndex);
            } else {
                clearInterval(intervals[rowIndex]);
                intervals[rowIndex] = null;
            }
        }, 1000);
    }

    // 버튼 생성 함수 (중복 코드 방지)
    function createImageButton(imgData, rowIndex) {
        const btn = document.createElement('button');
        const img = document.createElement('img');
        img.src = `images/${imgData.name}.png`;
        img.alt = imgData.name;
        
        btn.onclick = () => setAndStartTimer(rowIndex, imgData.sec);
        btn.appendChild(img);
        return btn;
    }

    for (let i = 0; i < rowsCount; i++) {
        const rowDiv = document.createElement('div');
        rowDiv.className = 'row';

        const timeSpan = document.createElement('span');
        timeSpan.id = `time-${i}`;
        timeSpan.className = 'time-display';
        timeSpan.innerText = "00:00";
        rowDiv.appendChild(timeSpan);

        const btnGroup = document.createElement('div');
        btnGroup.className = 'button-group';

        if (i === 2) {
            // 세 번째 줄 (5개 버튼)
            specialButtons.forEach(data => {
                btnGroup.appendChild(createImageButton(data, i));
            });
        } else {
            // 나머지 줄 (4개 버튼)
            standardButtons.forEach(data => {
                btnGroup.appendChild(createImageButton(data, i));
            });
        }

        rowDiv.appendChild(btnGroup);
        container.appendChild(rowDiv);
    }
</script>

</body>
</html>
